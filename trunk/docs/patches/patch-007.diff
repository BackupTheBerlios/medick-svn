Index: scripts/templates/controller.txt
===================================================================
--- scripts/templates/controller.txt	(revision 101)
+++ scripts/templates/controller.txt	(working copy)
@@ -3,9 +3,9 @@
 /** This file was autogenerated on ${__DATE__} by ${__USER__} */
 
 class ${Model}Controller extends ApplicationController {
+    
+    protected $model = array('${model}');
 
-	protected $model = array('${model}');
-
     /** List all items */
     public function all() {
         $this->template->${models} = ${Model}::find('all');
@@ -31,14 +31,13 @@
 
     /** Print the form for adding editing the ${model} */
     public function edit() {
-    	$this->template->${model} = ${Model}::find($this->params['${__PK__}']);
+        $this->template->${model} = ${Model}::find($this->params['${__PK__}']);
     }
 
-	/** Process the edit form */
-	public function update() {
-	    $${model} = new ${Model}(array('${__PK__}'=>$this->params['${__PK__}']));
+	  /** Process the edit form */
+  	public function update() {
+	      $${model} = new ${Model}(array('${__PK__}'=>$this->params['${__PK__}']));
         ${__FIELDS__}
-        // $item->description=$this->params['description'];
         // $${model}->author_id  = 1;
         try {
             $${model}->save();
@@ -47,7 +46,7 @@
             $this->logger->warn('SQLException caught!' . $sqlEx->getMessage());
             $this->render_text('Cannot Save!');
         }
-	}
+	  }
 
     /** removes an item from the DB */
     public function delete() {
@@ -60,5 +59,5 @@
             $this->render_text('Cannot Delete!');
         }
     }
-
 }
+
Index: scripts/templates/all.txt
===================================================================
--- scripts/templates/all.txt	(revision 101)
+++ scripts/templates/all.txt	(working copy)
@@ -11,13 +11,11 @@
 
   <body>
   	<h2>All ${models}</h2>
-    <div>
-	  <a href="<?= URL::create('${model}', 'anew');?>">Add a new ${Model}</a>
-    </div>
+    <div><a href="<?= URL::create('${model}', 'anew');?>">Add a new ${Model}</a></div>
     <hr />
     
     <? foreach ($${models} AS $${model}): ?>
-	  <p>
+	    <p>
         <a href="<?= URL::create('${model}', 'edit', array('id'=>$${model}->${__PK__}));?>">Edit</a>
         <a href="<?= URL::create('${model}', 'delete', array('id'=>$${model}->${__PK__}));?>">Distroy</a>
         ${__BUFFER__}
@@ -31,3 +29,4 @@
     
   </body>
 </html>
+
Index: scripts/templates/anew.txt
===================================================================
--- scripts/templates/anew.txt	(revision 101)
+++ scripts/templates/anew.txt	(working copy)
@@ -13,9 +13,10 @@
     <h2>Add a new ${model}</h2>
   	<form action="<?= URL::create('${model}','create');?>" method="post">
   		<p>
-  		${__BUFFER__}
-  		<?= Form::submit('submit', 'Add New ${Model}') ?>
+  		  ${__BUFFER__}
+  		  <?= Form::submit('submit', 'Add New ${Model}') ?>
   		</p>
 	</form>
   </body>  
-</html>
\ No newline at end of file
+</html>
+
Index: scripts/templates/helper.txt
===================================================================
--- scripts/templates/helper.txt	(revision 101)
+++ scripts/templates/helper.txt	(working copy)
@@ -3,3 +3,4 @@
 /** This file was autogenerated on ${__DATE__} by ${__USER__} */
 
 // ${model}_helper.php
+
Index: libs/active/record/Base.php
===================================================================
--- libs/active/record/Base.php	(revision 101)
+++ libs/active/record/Base.php	(working copy)
@@ -254,9 +254,9 @@
         }
         $sql = 'UPDATE ' . self::$table_name . ' SET ';
         foreach($this->fields->getAffectedFields() as $field) {
-            $sql .= $field->getName() . ' = ?,';
+            $sql .= $field->getName() . ' = ?, ';
         }
-        return substr($sql, 0, -1) . $sqlSnippet;
+        return substr($sql, 0, -2) . $sqlSnippet;
         
     }
 
